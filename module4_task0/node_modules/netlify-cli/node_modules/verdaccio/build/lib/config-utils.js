"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getMatchedPackagesSpec = getMatchedPackagesSpec;
exports.hasProxyTo = hasProxyTo;
exports.normalisePackageAccess = normalisePackageAccess;
exports.normalizeUserList = normalizeUserList;
exports.sanityCheckNames = sanityCheckNames;
exports.sanityCheckUplinksProps = sanityCheckUplinksProps;
exports.uplinkSanityCheck = uplinkSanityCheck;
var _assert = _interopRequireDefault(require("assert"));
var _lodash = _interopRequireDefault(require("lodash"));
var _minimatch = _interopRequireDefault(require("minimatch"));
var _utils = require("./utils");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
const BLACKLIST = {
  all: true,
  anonymous: true,
  undefined: true,
  owner: true,
  none: true
};

/**
 * Normalize user list.
 * @return {Array}
 */
function normalizeUserList(oldFormat, newFormat) {
  const result = [];
  /* eslint prefer-rest-params: "off" */

  for (let i = 0; i < arguments.length; i++) {
    if (arguments[i] == null) {
      continue;
    }

    // if it's a string, split it to array
    if (_lodash.default.isString(arguments[i])) {
      result.push(arguments[i].split(/\s+/));
    } else if (Array.isArray(arguments[i])) {
      result.push(arguments[i]);
    } else {
      throw _utils.ErrorCode.getInternalError('CONFIG: bad package acl (array or string expected): ' + JSON.stringify(arguments[i]));
    }
  }
  return _lodash.default.flatten(result);
}
function uplinkSanityCheck(uplinks, users = BLACKLIST) {
  const newUplinks = _lodash.default.clone(uplinks);
  let newUsers = _lodash.default.clone(users);
  for (const uplink in newUplinks) {
    if (Object.prototype.hasOwnProperty.call(newUplinks, uplink)) {
      if (_lodash.default.isNil(newUplinks[uplink].cache)) {
        newUplinks[uplink].cache = true;
      }
      newUsers = sanityCheckNames(uplink, newUsers);
    }
  }
  return newUplinks;
}
function sanityCheckNames(item, users) {
  (0, _assert.default)(item !== 'all' && item !== 'owner' && item !== 'anonymous' && item !== 'undefined' && item !== 'none', 'CONFIG: reserved uplink name: ' + item);
  (0, _assert.default)(!item.match(/\s/), 'CONFIG: invalid uplink name: ' + item);
  (0, _assert.default)(_lodash.default.isNil(users[item]), 'CONFIG: duplicate uplink name: ' + item);
  users[item] = true;
  return users;
}
function sanityCheckUplinksProps(configUpLinks) {
  const uplinks = _lodash.default.clone(configUpLinks);
  for (const uplink in uplinks) {
    if (Object.prototype.hasOwnProperty.call(uplinks, uplink)) {
      (0, _assert.default)(uplinks[uplink].url, 'CONFIG: no url for uplink: ' + uplink);
      (0, _assert.default)(_lodash.default.isString(uplinks[uplink].url), 'CONFIG: wrong url format for uplink: ' + uplink);
      uplinks[uplink].url = uplinks[uplink].url.replace(/\/$/, '');
    }
  }
  return uplinks;
}

/**
 * Check whether an uplink can proxy
 */
function hasProxyTo(pkg, upLink, packages) {
  const matchedPkg = getMatchedPackagesSpec(pkg, packages);
  const proxyList = typeof matchedPkg !== 'undefined' ? matchedPkg.proxy : [];
  if (proxyList) {
    return proxyList.some(curr => upLink === curr);
  }
  return false;
}
function getMatchedPackagesSpec(pkgName, packages) {
  for (const i in packages) {
    if (_minimatch.default.makeRe(i).exec(pkgName)) {
      return packages[i];
    }
  }
  return;
}
function normalisePackageAccess(packages) {
  const normalizedPkgs = _objectSpread({}, packages);
  // add a default rule for all packages to make writing plugins easier
  if (_lodash.default.isNil(normalizedPkgs['**'])) {
    normalizedPkgs['**'] = {
      access: [],
      publish: [],
      proxy: []
    };
  }
  for (const pkg in packages) {
    if (Object.prototype.hasOwnProperty.call(packages, pkg)) {
      (0, _assert.default)(_lodash.default.isObject(packages[pkg]) && _lodash.default.isArray(packages[pkg]) === false, `CONFIG: bad "'${pkg}'" package description (object expected)`);
      normalizedPkgs[pkg].access = normalizeUserList(packages[pkg].allow_access, packages[pkg].access);
      delete normalizedPkgs[pkg].allow_access;
      normalizedPkgs[pkg].publish = normalizeUserList(packages[pkg].allow_publish, packages[pkg].publish);
      delete normalizedPkgs[pkg].allow_publish;
      normalizedPkgs[pkg].proxy = normalizeUserList(packages[pkg].proxy_access, packages[pkg].proxy);
      delete normalizedPkgs[pkg].proxy_access;
      // if unpublish is not defined, we set to false to fallback in publish access
      normalizedPkgs[pkg].unpublish = _lodash.default.isUndefined(packages[pkg].unpublish) ? false : normalizeUserList([], packages[pkg].unpublish);
    }
  }
  return normalizedPkgs;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCTEFDS0xJU1QiLCJhbGwiLCJhbm9ueW1vdXMiLCJ1bmRlZmluZWQiLCJvd25lciIsIm5vbmUiLCJub3JtYWxpemVVc2VyTGlzdCIsIm9sZEZvcm1hdCIsIm5ld0Zvcm1hdCIsInJlc3VsdCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJfIiwiaXNTdHJpbmciLCJwdXNoIiwic3BsaXQiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvckNvZGUiLCJnZXRJbnRlcm5hbEVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImZsYXR0ZW4iLCJ1cGxpbmtTYW5pdHlDaGVjayIsInVwbGlua3MiLCJ1c2VycyIsIm5ld1VwbGlua3MiLCJjbG9uZSIsIm5ld1VzZXJzIiwidXBsaW5rIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaXNOaWwiLCJjYWNoZSIsInNhbml0eUNoZWNrTmFtZXMiLCJpdGVtIiwiYXNzZXJ0IiwibWF0Y2giLCJzYW5pdHlDaGVja1VwbGlua3NQcm9wcyIsImNvbmZpZ1VwTGlua3MiLCJ1cmwiLCJyZXBsYWNlIiwiaGFzUHJveHlUbyIsInBrZyIsInVwTGluayIsInBhY2thZ2VzIiwibWF0Y2hlZFBrZyIsImdldE1hdGNoZWRQYWNrYWdlc1NwZWMiLCJwcm94eUxpc3QiLCJwcm94eSIsInNvbWUiLCJjdXJyIiwicGtnTmFtZSIsIm1pbmltYXRjaCIsIm1ha2VSZSIsImV4ZWMiLCJub3JtYWxpc2VQYWNrYWdlQWNjZXNzIiwibm9ybWFsaXplZFBrZ3MiLCJhY2Nlc3MiLCJwdWJsaXNoIiwiaXNPYmplY3QiLCJhbGxvd19hY2Nlc3MiLCJhbGxvd19wdWJsaXNoIiwicHJveHlfYWNjZXNzIiwidW5wdWJsaXNoIiwiaXNVbmRlZmluZWQiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvbGliL2NvbmZpZy11dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IG1pbmltYXRjaCBmcm9tICdtaW5pbWF0Y2gnO1xuXG5pbXBvcnQgeyBQYWNrYWdlTGlzdCwgVXBMaW5rc0NvbmZMaXN0IH0gZnJvbSAnQHZlcmRhY2Npby90eXBlcyc7XG5cbmltcG9ydCB7IExlZ2FjeVBhY2thZ2VMaXN0LCBNYXRjaGVkUGFja2FnZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IEVycm9yQ29kZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBCTEFDS0xJU1QgPSB7XG4gIGFsbDogdHJ1ZSxcbiAgYW5vbnltb3VzOiB0cnVlLFxuICB1bmRlZmluZWQ6IHRydWUsXG4gIG93bmVyOiB0cnVlLFxuICBub25lOiB0cnVlLFxufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgdXNlciBsaXN0LlxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVVc2VyTGlzdChvbGRGb3JtYXQ6IGFueSwgbmV3Rm9ybWF0OiBhbnkpOiBhbnkge1xuICBjb25zdCByZXN1bHQ6IGFueVtdW10gPSBbXTtcbiAgLyogZXNsaW50IHByZWZlci1yZXN0LXBhcmFtczogXCJvZmZcIiAqL1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFyZ3VtZW50c1tpXSA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBpZiBpdCdzIGEgc3RyaW5nLCBzcGxpdCBpdCB0byBhcnJheVxuICAgIGlmIChfLmlzU3RyaW5nKGFyZ3VtZW50c1tpXSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGFyZ3VtZW50c1tpXS5zcGxpdCgvXFxzKy8pKTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzW2ldKSkge1xuICAgICAgcmVzdWx0LnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgRXJyb3JDb2RlLmdldEludGVybmFsRXJyb3IoJ0NPTkZJRzogYmFkIHBhY2thZ2UgYWNsIChhcnJheSBvciBzdHJpbmcgZXhwZWN0ZWQpOiAnICsgSlNPTi5zdHJpbmdpZnkoYXJndW1lbnRzW2ldKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBfLmZsYXR0ZW4ocmVzdWx0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwbGlua1Nhbml0eUNoZWNrKHVwbGlua3M6IFVwTGlua3NDb25mTGlzdCwgdXNlcnM6IGFueSA9IEJMQUNLTElTVCk6IFVwTGlua3NDb25mTGlzdCB7XG4gIGNvbnN0IG5ld1VwbGlua3MgPSBfLmNsb25lKHVwbGlua3MpO1xuICBsZXQgbmV3VXNlcnMgPSBfLmNsb25lKHVzZXJzKTtcblxuICBmb3IgKGNvbnN0IHVwbGluayBpbiBuZXdVcGxpbmtzKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXdVcGxpbmtzLCB1cGxpbmspKSB7XG4gICAgICBpZiAoXy5pc05pbChuZXdVcGxpbmtzW3VwbGlua10uY2FjaGUpKSB7XG4gICAgICAgIG5ld1VwbGlua3NbdXBsaW5rXS5jYWNoZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBuZXdVc2VycyA9IHNhbml0eUNoZWNrTmFtZXModXBsaW5rLCBuZXdVc2Vycyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld1VwbGlua3M7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdHlDaGVja05hbWVzKGl0ZW06IHN0cmluZywgdXNlcnM6IGFueSk6IGFueSB7XG4gIGFzc2VydChpdGVtICE9PSAnYWxsJyAmJiBpdGVtICE9PSAnb3duZXInICYmIGl0ZW0gIT09ICdhbm9ueW1vdXMnICYmIGl0ZW0gIT09ICd1bmRlZmluZWQnICYmIGl0ZW0gIT09ICdub25lJywgJ0NPTkZJRzogcmVzZXJ2ZWQgdXBsaW5rIG5hbWU6ICcgKyBpdGVtKTtcbiAgYXNzZXJ0KCFpdGVtLm1hdGNoKC9cXHMvKSwgJ0NPTkZJRzogaW52YWxpZCB1cGxpbmsgbmFtZTogJyArIGl0ZW0pO1xuICBhc3NlcnQoXy5pc05pbCh1c2Vyc1tpdGVtXSksICdDT05GSUc6IGR1cGxpY2F0ZSB1cGxpbmsgbmFtZTogJyArIGl0ZW0pO1xuICB1c2Vyc1tpdGVtXSA9IHRydWU7XG5cbiAgcmV0dXJuIHVzZXJzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FuaXR5Q2hlY2tVcGxpbmtzUHJvcHMoY29uZmlnVXBMaW5rczogVXBMaW5rc0NvbmZMaXN0KTogVXBMaW5rc0NvbmZMaXN0IHtcbiAgY29uc3QgdXBsaW5rcyA9IF8uY2xvbmUoY29uZmlnVXBMaW5rcyk7XG5cbiAgZm9yIChjb25zdCB1cGxpbmsgaW4gdXBsaW5rcykge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodXBsaW5rcywgdXBsaW5rKSkge1xuICAgICAgYXNzZXJ0KHVwbGlua3NbdXBsaW5rXS51cmwsICdDT05GSUc6IG5vIHVybCBmb3IgdXBsaW5rOiAnICsgdXBsaW5rKTtcbiAgICAgIGFzc2VydChfLmlzU3RyaW5nKHVwbGlua3NbdXBsaW5rXS51cmwpLCAnQ09ORklHOiB3cm9uZyB1cmwgZm9ybWF0IGZvciB1cGxpbms6ICcgKyB1cGxpbmspO1xuICAgICAgdXBsaW5rc1t1cGxpbmtdLnVybCA9IHVwbGlua3NbdXBsaW5rXS51cmwucmVwbGFjZSgvXFwvJC8sICcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdXBsaW5rcztcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGFuIHVwbGluayBjYW4gcHJveHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1Byb3h5VG8ocGtnOiBzdHJpbmcsIHVwTGluazogc3RyaW5nLCBwYWNrYWdlczogUGFja2FnZUxpc3QpOiBib29sZWFuIHtcbiAgY29uc3QgbWF0Y2hlZFBrZzogTWF0Y2hlZFBhY2thZ2UgPSBnZXRNYXRjaGVkUGFja2FnZXNTcGVjKHBrZywgcGFja2FnZXMpO1xuICBjb25zdCBwcm94eUxpc3QgPSB0eXBlb2YgbWF0Y2hlZFBrZyAhPT0gJ3VuZGVmaW5lZCcgPyBtYXRjaGVkUGtnLnByb3h5IDogW107XG4gIGlmIChwcm94eUxpc3QpIHtcbiAgICByZXR1cm4gcHJveHlMaXN0LnNvbWUoKGN1cnIpID0+IHVwTGluayA9PT0gY3Vycik7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXRjaGVkUGFja2FnZXNTcGVjKHBrZ05hbWU6IHN0cmluZywgcGFja2FnZXM6IFBhY2thZ2VMaXN0KTogTWF0Y2hlZFBhY2thZ2Uge1xuICBmb3IgKGNvbnN0IGkgaW4gcGFja2FnZXMpIHtcbiAgICBpZiAobWluaW1hdGNoLm1ha2VSZShpKS5leGVjKHBrZ05hbWUpKSB7XG4gICAgICByZXR1cm4gcGFja2FnZXNbaV07XG4gICAgfVxuICB9XG4gIHJldHVybjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGlzZVBhY2thZ2VBY2Nlc3MocGFja2FnZXM6IExlZ2FjeVBhY2thZ2VMaXN0KTogTGVnYWN5UGFja2FnZUxpc3Qge1xuICBjb25zdCBub3JtYWxpemVkUGtnczogTGVnYWN5UGFja2FnZUxpc3QgPSB7IC4uLnBhY2thZ2VzIH07XG4gIC8vIGFkZCBhIGRlZmF1bHQgcnVsZSBmb3IgYWxsIHBhY2thZ2VzIHRvIG1ha2Ugd3JpdGluZyBwbHVnaW5zIGVhc2llclxuICBpZiAoXy5pc05pbChub3JtYWxpemVkUGtnc1snKionXSkpIHtcbiAgICBub3JtYWxpemVkUGtnc1snKionXSA9IHsgYWNjZXNzOiBbXSwgcHVibGlzaDogW10sIHByb3h5OiBbXSB9O1xuICB9XG5cbiAgZm9yIChjb25zdCBwa2cgaW4gcGFja2FnZXMpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhY2thZ2VzLCBwa2cpKSB7XG4gICAgICBhc3NlcnQoXy5pc09iamVjdChwYWNrYWdlc1twa2ddKSAmJiBfLmlzQXJyYXkocGFja2FnZXNbcGtnXSkgPT09IGZhbHNlLCBgQ09ORklHOiBiYWQgXCInJHtwa2d9J1wiIHBhY2thZ2UgZGVzY3JpcHRpb24gKG9iamVjdCBleHBlY3RlZClgKTtcbiAgICAgIG5vcm1hbGl6ZWRQa2dzW3BrZ10uYWNjZXNzID0gbm9ybWFsaXplVXNlckxpc3QocGFja2FnZXNbcGtnXS5hbGxvd19hY2Nlc3MsIHBhY2thZ2VzW3BrZ10uYWNjZXNzKTtcbiAgICAgIGRlbGV0ZSBub3JtYWxpemVkUGtnc1twa2ddLmFsbG93X2FjY2VzcztcbiAgICAgIG5vcm1hbGl6ZWRQa2dzW3BrZ10ucHVibGlzaCA9IG5vcm1hbGl6ZVVzZXJMaXN0KHBhY2thZ2VzW3BrZ10uYWxsb3dfcHVibGlzaCwgcGFja2FnZXNbcGtnXS5wdWJsaXNoKTtcbiAgICAgIGRlbGV0ZSBub3JtYWxpemVkUGtnc1twa2ddLmFsbG93X3B1Ymxpc2g7XG4gICAgICBub3JtYWxpemVkUGtnc1twa2ddLnByb3h5ID0gbm9ybWFsaXplVXNlckxpc3QocGFja2FnZXNbcGtnXS5wcm94eV9hY2Nlc3MsIHBhY2thZ2VzW3BrZ10ucHJveHkpO1xuICAgICAgZGVsZXRlIG5vcm1hbGl6ZWRQa2dzW3BrZ10ucHJveHlfYWNjZXNzO1xuICAgICAgLy8gaWYgdW5wdWJsaXNoIGlzIG5vdCBkZWZpbmVkLCB3ZSBzZXQgdG8gZmFsc2UgdG8gZmFsbGJhY2sgaW4gcHVibGlzaCBhY2Nlc3NcbiAgICAgIG5vcm1hbGl6ZWRQa2dzW3BrZ10udW5wdWJsaXNoID0gXy5pc1VuZGVmaW5lZChwYWNrYWdlc1twa2ddLnVucHVibGlzaCkgPyBmYWxzZSA6IG5vcm1hbGl6ZVVzZXJMaXN0KFtdLCBwYWNrYWdlc1twa2ddLnVucHVibGlzaCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5vcm1hbGl6ZWRQa2dzO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFLQTtBQUFvQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFcEMsTUFBTUEsU0FBUyxH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